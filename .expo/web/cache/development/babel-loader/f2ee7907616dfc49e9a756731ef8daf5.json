{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { React, useState } from \"react\";\nimport { Colors } from \"../../../componentes/generel/contants\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport style from \"./style\";\nimport { login } from \"../../../services/Auth\";\nimport jwtDecode from \"jwt-decode\";\nimport { useDispatch } from \"react-redux\";\nimport { loginAction, setRoleAction, setIdAction, setEmail, setUsername } from \"../../../store/actions/authActions\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useSelector } from \"react-redux\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      submitted = _useState4[0],\n      setSubmitted = _useState4[1];\n\n  var dispatch = useDispatch();\n  var Role = useSelector(function (state) {\n    return state.email;\n  });\n  console.log(Role);\n\n  var handelSubmit = function _callee2() {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            login(user.email, user.password).then(function (response) {\n              (function _callee() {\n                var Token;\n                return _regeneratorRuntime.async(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return _regeneratorRuntime.awrap(dispatch(loginAction(jwtDecode(response.data.accessToken))));\n\n                      case 2:\n                        _context.next = 4;\n                        return _regeneratorRuntime.awrap(dispatch(setRoleAction(jwtDecode(response.data.accessToken).role)));\n\n                      case 4:\n                        _context.next = 6;\n                        return _regeneratorRuntime.awrap(dispatch(setIdAction(jwtDecode(response.data.accessToken).id)));\n\n                      case 6:\n                        _context.next = 8;\n                        return _regeneratorRuntime.awrap(dispatch(setEmail(jwtDecode(response.data.accessToken).email)));\n\n                      case 8:\n                        _context.next = 10;\n                        return _regeneratorRuntime.awrap(dispatch(setUsername(jwtDecode(response.data.accessToken).username)));\n\n                      case 10:\n                        _context.next = 12;\n                        return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"token\", response.data.accessToken));\n\n                      case 12:\n                        Token = _context.sent;\n                        _context.next = 15;\n                        return _regeneratorRuntime.awrap(navigation.navigate(\"Profile\"));\n\n                      case 15:\n                        console.log(jwtDecode(response.data.accessToken).email);\n\n                      case 16:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              })();\n\n              setSubmitted(true);\n            });\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(View, {\n    style: style.container,\n    children: [_jsxs(View, {\n      style: style.header,\n      children: [_jsx(ImageBackground, {\n        style: {\n          height: \"100%\",\n          width: \"100%\",\n          position: \"absolute\"\n        },\n        source: require(\"../../../../assets/t\\xE9l\\xE9chargement.jpg\")\n      }), _jsx(Text, {\n        style: [style.text_header, {\n          marginBottom: 80\n        }],\n        children: \"Welcome!\"\n      })]\n    }), _jsxs(View, {\n      style: style.footer,\n      children: [_jsx(Text, {\n        style: style.text_footer,\n        children: \"Email\"\n      }), _jsxs(View, {\n        style: style.action,\n        children: [_jsx(FontAwesome, {\n          name: \"envelope\",\n          size: 20\n        }), _jsx(TextInput, {\n          placeholder: \"Your Email\",\n          onChangeText: function onChangeText(email) {\n            return setUser(_objectSpread(_objectSpread({}, user), {}, {\n              email: email\n            }));\n          },\n          placeholderTextColor: \"#666666\",\n          style: [style.textInput, {\n            color: Colors.text\n          }]\n        })]\n      }), _jsx(Text, {\n        style: [style.text_footer, {\n          marginTop: 30\n        }],\n        children: \"Password\"\n      }), _jsxs(View, {\n        style: style.action,\n        children: [_jsx(FontAwesome, {\n          name: \"lock\",\n          size: 20\n        }), _jsx(TextInput, {\n          placeholder: \"Password\",\n          placeholderTextColor: \"#666666\",\n          onChangeText: function onChangeText(password) {\n            return setUser(_objectSpread(_objectSpread({}, user), {}, {\n              password: password\n            }));\n          },\n          style: [style.textInput, {\n            color: Colors.text\n          }]\n        })]\n      }), _jsx(TouchableOpacity, {\n        style: style.button,\n        onPress: handelSubmit,\n        children: _jsx(LinearGradient, {\n          colors: [\"#596C30\", \"#29553D\"],\n          style: style.signIn,\n          children: _jsx(Text, {\n            style: [style.textSign, {\n              color: \"#fff\"\n            }],\n            children: \"Sign In\"\n          })\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","Colors","FontAwesome","LinearGradient","style","login","jwtDecode","useDispatch","loginAction","setRoleAction","setIdAction","setEmail","setUsername","AsyncStorage","useSelector","Login","navigation","email","password","user","setUser","submitted","setSubmitted","dispatch","Role","state","console","log","handelSubmit","then","response","data","accessToken","role","id","username","setItem","Token","navigate","container","header","height","width","position","require","text_header","marginBottom","footer","text_footer","action","textInput","color","text","marginTop","button","signIn","textSign"],"sources":["C:/Users/Youcode/Desktop/fillkh/src/screen/Auth/login/login.js"],"sourcesContent":["import {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  ImageBackground,\n  TouchableOpacity,\n} from \"react-native\";\nimport { React, useState } from \"react\";\nimport { Colors } from \"../../../componentes/generel/contants\";\nimport FontAwesome from \"react-native-vector-icons/FontAwesome\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport style from \"./style\";\nimport { login } from \"../../../services/Auth\";\nimport jwtDecode from \"jwt-decode\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  loginAction,\n  setRoleAction,\n  setIdAction,\n  setEmail,\n  setUsername,\n} from \"../../../store/actions/authActions\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useSelector } from \"react-redux\";\n// import {PrimaryButton } from \"../../../componentes/generel/button/button\";\n\nexport default function Login({ navigation }) {\n  const [user, setUser] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [submitted, setSubmitted] = useState(false);\n  const dispatch = useDispatch();\n  const Role = useSelector((state) => state.email);\n  console.log(Role);\n\n  const handelSubmit = async () => {\n    login(user.email, user.password).then((response) => {\n      (async () => {\n        await dispatch(loginAction(jwtDecode(response.data.accessToken)));\n        await dispatch(\n          setRoleAction(jwtDecode(response.data.accessToken).role)\n        );\n        await dispatch(setIdAction(jwtDecode(response.data.accessToken).id));\n        await dispatch(setEmail(jwtDecode(response.data.accessToken).email));\n        await dispatch(\n          setUsername(jwtDecode(response.data.accessToken).username)\n        );\n\n        const Token = await AsyncStorage.setItem(\n          \"token\",\n          response.data.accessToken\n        );\n        await navigation.navigate(\"Profile\");\n        console.log(jwtDecode(response.data.accessToken).email);\n      })();\n      setSubmitted(true);\n    });\n  };\n\n  return (\n    <View style={style.container}>\n      <View style={style.header}>\n        <ImageBackground\n          style={{ height: \"100%\", width: \"100%\", position: \"absolute\" }}\n          source={require(\"../../../../assets/téléchargement.jpg\")}\n        />\n        <Text style={[style.text_header, { marginBottom: 80 }]}>Welcome!</Text>\n      </View>\n      <View style={style.footer}>\n        <Text style={style.text_footer}>Email</Text>\n        <View style={style.action}>\n          <FontAwesome name=\"envelope\" size={20} />\n          <TextInput\n            placeholder=\"Your Email\"\n            onChangeText={(email) => setUser({ ...user, email: email })}\n            placeholderTextColor=\"#666666\"\n            style={[\n              style.textInput,\n              {\n                color: Colors.text,\n              },\n            ]}\n          />\n        </View>\n        <Text style={[style.text_footer, { marginTop: 30 }]}>Password</Text>\n        <View style={style.action}>\n          <FontAwesome name=\"lock\" size={20} />\n          <TextInput\n            placeholder=\"Password\"\n            placeholderTextColor=\"#666666\"\n            onChangeText={(password) =>\n              setUser({ ...user, password: password })\n            }\n            style={[\n              style.textInput,\n              {\n                color: Colors.text,\n              },\n            ]}\n          />\n        </View>\n        <TouchableOpacity style={style.button} onPress={handelSubmit}>\n          <LinearGradient colors={[\"#596C30\", \"#29553D\"]} style={style.signIn}>\n            <Text\n              style={[\n                style.textSign,\n                {\n                  color: \"#fff\",\n                },\n              ]}\n            >\n              Sign In\n            </Text>\n          </LinearGradient>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}